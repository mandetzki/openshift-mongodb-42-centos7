FROM openshift/mongodb-24-centos7
USER root

COPY dockerdir / 

RUN export MONGODB_42_PORT=$MONGODB_24_CENTOS7_PORT
RUN export MONGODB_42_PORT_27017_TCP_PROTO=$MONGODB_24_CENTOS7_PORT_27017_TCP_PROTO    
RUN export MONGODB_42_PORT_27017_TCP=$MONGODB_24_CENTOS7_PORT_27017_TCP
RUN export MONGODB_42_SERVICE_HOST=$MONGODB_24_CENTOS7_SERVICE_HOST
RUN export MONGODB_42_PORT_27017_TCP_ADDR=$MONGODB_24_CENTOS7_PORT_27017_TCP_ADDR
RUN export MONGODB_42_SERVICE_PORT=$MONGODB_24_CENTOS7_SERVICE_PORT
RUN export MONGODB_42_PORT_27017_TCP_PORT=$MONGODB_24_CENTOS7_PORT_27017_TCP_PORT
RUN export MONGODB_42_SERVICE_PORT_27017_TCP=RUN export MONGODB_42_SERVICE_PORT_27017_TCP=$MONGODB_24_CENTOS7_SERVICE_PORT_27017_TCP

RUN yum update -y && yum -y install mongodb-org

USER mongodb

VOLUME [ "/var/lib/mongo/" , '/var/log/mongodb']
ENTRYPOINT [ "/usr/bin/entrypoint.sh" ] 